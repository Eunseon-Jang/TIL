<!DOCTYPE html>
<html>
<head>
	<title>Vanilla.js</title>
	<link rel="stylesheet" type="text/css" href="./pin.css">
	<script type="text/javascript" src="./pin.js"></script>
</head>

<body>
	<div id="app">

	</div>

	<script>
		var callback = function(res) {
			var 원본데이터 = (res.data.eventList);

			var 이벤트Gbn40 = 원본데이터.filter(function(event, index, eventList) {
				return parseInt(event.evntGbn) === 40;
			}).slice(0,10).forEach(function(event, index, eventList) {
				SimplePin.render(event, index, "#app");
			});
		};

		var xhr = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest();
		xhr.open("POST", "https://m.apps.ssg.com/api/eventcoupon/main/datas.ssg", true);
		xhr.onreadystatechange = function() {
			if(xhr.readyState != 4 || xhr.status != 200 ) { return; }
			callback(JSON.parse(xhr.responseText));
		}
		xhr.send(JSON.stringify({"common":{"apl_ver":"2.4.5","os_cd":"20","ts":"20171121144621","mobil_app_no":"12"},"params":{"itemImgSize":"500","siteNo":"6005","type":"osmu"}}));
	</script>
</body>

</html>