<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Hello World</title>
	<script src="../caller.js"></script>
</head>
<body>

	<script async>
		let destructuring = {};

    destructuring.배열디스트럭처링 = function() {
      //ES5
      var arr = [1,2,3]

      var one = arr[0];
      var two = arr[1];
      var three = arr[2];

      console.log(one, two, three);

      //ES6 Destructuring
      const arr1 = [1,2,3];
      const [one1, two1, three1] = arr1;

      console.log(one1, two1, three1);
      //배열 디스트럭쳐링을 위해서는 할당 연산자 왼쪽에 배열 형태의 변수 리스트가 필요하다.

      let x, y, z;
      [x, y, z] = [1, 2, 3];
      // = let x, y, z = [1, 2, 3] 과 동치이다.

    }

    destructuring.할당기준 = function() {
      let x, y, z;
      [x, y] = [1, 2]; 
      console.log(x, y); //1, 2

      [x, y] = [1];
      console.log(x, y); //1, undefined

      [x, y] = [1,2,3];
      console.log(x, y); //1, 2

      [x, ,z] = [1, 2, 3];
      console.log(x, z); //1, 3

      //기본값
      [x, y, z =3] = [1, 2];
      console.log(x, y, z);// 1, 2, 3

      [x, y =10, z =3] = [1, 2];
      console.log(x, y, z);// 1, 2, 3

      //spread연산자
      [x, ...y] = [1, 2, 3];
      console.log(x, y);// 1, [2, 3]
    }

    destructuring.데이트예제 = function() {
      const today = new Date();
      const formattedDate = today.toISOString().substring(0,10);
      const [year, month, day] = formattedDate.split('-');
      console.log([year, month, day]); //['2018', '05', '05']
    }

    destructuring.객체디스트럭처링 = function() {
      //ES5
      var obj = { firstName: 'Ungmo', lastName: 'Lee'};

      var firstName = obj.firstName;
      var lastName = obj.lastName;

      console.log(firstName, lastName); //Ungmo Lee

      //ES6
      const obj2 = {firstName1: 'Ungmo', lastName2: 'Lee'};
      const {firstName1, lastName2} = obj2

      console.log(firstName1, lastName2); // 할당 기준은 프로퍼티 이름이다.

      // const {prop1: p1, prop2: 2} = {prop1: 'a', prop2: 'b'};
      //invaild Error 뜸..
      // console.log(p1, p2);

      //위의 축약형
      const {prop1, prop2} = {prop1: 'a', prop2: 'b'};
      console.log({prop1, prop2}); 

      //default value
      const { prop12, prop22, prop32 = 'c'} = { prop12: 'a', prop22: 'b'};
      console.log({prop12, prop22, prop32})
    }

    destructuring.프로퍼티이름으로값추출 = function() {
      const todos = [
        {id: 1, content: 'HTML', completed: true},
        {id: 2, content: 'CSS', completed: false},
        {id: 3, content: 'JS', completed: false},
      ];

      //todos 배열의 요소인 객체로부터 completed 프로퍼티만을 추출한다.
      const completedTodos = todos.filter(({completed}) => completed);
      console.log(completedTodos);

      //중첩객체는 아래와 같이 사용
      const person = {
        name: 'Lee',
        address: {
          zipCode: '03068',
          city: 'Seoul',
        }
      };

      // const { address: {
      //   city: 'incoen',
      // }}

      const {address: {city}} = person;
      console.log(city); //seoul ?? ㅜㅜ 좀 이해가 안 감.
    }

    Caller.execute(destructuring); // 모든 메소드를 실행하는 모듈
  </script>
</body>
</html>